# 1、简介

​	通过制定约束文件，通过等价类、边界值、正交法等方法，为单接口自动生成符合接口自动化平台Alex导入规范的测试用例。

# 2、约束文件

## 2.1、约束文件示例

```javascript
{
	"property": {
		"projectId": 4,
		"moduleId": 5,
		"url": "/user/register",
		"method": "post",
		"desc": "用户注册接口",
		"doc": "",
		"headers": "",
		"schemaType": "data",
		"validEquivalenceClass": {
			"caseLevel": "高",
			"asserts": [
				{
					"order": 1,
					"desc": "http状态码需等于200",
					"type": "code",
					"operator": "=",
					"expect": 200
				},
				{
					"order": 2,
					"desc": "接口状态码需等于200",
					"type": "json",
					"expression": "$..code",
					"operator": "=",
					"expect": 200
				}
			]
		},
		"invalidEquivalenceClass": {
			"caseLevel": "中",
			"asserts": [
				{
					"order": 1,
					"desc": "http状态码需等于200",
					"type": "code",
					"operator": "=",
					"expect": 200
				},
				{
					"order": 2,
					"desc": "接口状态码不等于200",
					"type": "json",
					"expression": "$..code",
					"operator": "!=",
					"expect": 200
				}
			]
		}
	},
	"schema": [
		{
			"name": "username",
			"desc": "用户名",
			"type": "NotInDb",
			"globalConfig": {
				"allowNull": false,
				"allowRepeat": false
			},
			"privateConfig": {
				"dbId": 1,
				"sql": "select username from t_user",
				"elementType": "String"
			}
		},
		{
			"name": "password",
			"desc": "密码",
			"type": "String",
			"globalConfig": {
				"allowNull": false,
				"allowRepeat": true
			},
			"privateConfig": {
				"allowIllegal": true,
				"allowEmpty": false,
				"minLen": 1,
				"maxLen": 10
			}
		},
		{
			"name": "sex",
			"desc": "性别",
			"type": "InArray",
			"globalConfig": {
				"allowNull": false,
				"allowRepeat": true
			},
			"privateConfig": {
				"value": [0, 1],
				"elementType": "Integer"
			}
		}
	]
}
```



## 2.2、属性释义

- property：用例基础属性对象
  - projectId：项目编号（Alex平台中的项目编号）
  - moduleId：模块编号（Alex平台中的模块编号）
  - url：接口地址
  - method：请求方式（枚举值：get、post、patch、put、delete）
  - desc：接口描述（生成的用例名称会以该属性作为前缀）
  - doc：接口文档地址
  - headers：请求headers（json对象字符串）
  - **schemaType**：约束类型（枚举值：data、json、params，**根据该字段确定约束生成的类型**）
  - validEquivalenceClass：有效等价类专有属性
    - caseLevel：用例等级（枚举值：高、中、低）
    - asserts：断言列表
      - order：断言排序
      - desc：断言描述
      - type：断言类型（枚举值：json、html、code）
      - operator：比较符（枚举值：=、<、>、<=、>=、in、!=、re）
      - expect：预期结果
  - invalidEquivalenceClass：无效等价类专有属性
    - caseLevel：用例等级（枚举值：高、中、低）
    - asserts：断言列表
      - order：断言排序
      - desc：断言描述
      - type：断言类型（枚举值：json、html、code）
      - operator：比较符（枚举值：=、<、>、<=、>=、in、!=、re）
      - expect：预期结果
- schema：为接口中每个字段制定约束
  - name：接口字段名称
  - desc：字段描述
  - **type**：类型（枚举值：String、Number、InDb、NotInDb、Const、InArray、NotInArray；**不同类型的privateConfig对象属性不一样**）
  - globalConfig
    - allowNull：是否允许为null
    - allowRepeat：是否允许重复
  - privateConfig（type==String）
    - allowIllegal：是否允许非法字符
    - allowEmpty：是否允许空字符串
    - minLen：最小长度（含）
    - maxLen：最大长度（含）
  - privateConfig（type==Number）
    - min：最小值
    - max：最大值
  - privateConfig（type==InDb || type==NotInDb）
    - dbId：数据源编号（Alex平台中的数据源编号）
    - sql：查询语句（仅支持查询单个字段）
    - elementType：查询结果返回值类型（枚举值：String、Number、Integer、Float、Double）
  - privateConfig（type==Const）
    - value：常量值
  - privateConfig（type==InArray || type==NotInArray）
    - value：数组
    - elementType：查询结果返回值类型（枚举值：String、Number、Integer、Float、Double）

##  2.3、生成结果示例

​	根据上述约束文件生成的某个接口用例示例

```javascript
{
	"projectId": 4,
	"moduleId": 5,
	"url": "/user/register",
	"method": "post",
	"desc": "无效等价类 用户注册接口 用户名<username>为null 密码<password>为null 真实姓名<realName>为null 性别<sex>为null",
	"level": "中",
	"doc": "",
	"headers": "",
	"data": "{'realName':null,'password':null,'sex':null,'username':null}",
	"asserts": [{
		"expect": 200,
		"type": "code",
		"operator": "=",
		"order": 1,
		"desc": "http状态码需等于200"
	}, {
		"expect": 200,
		"expression": "$..code",
		"type": "json",
		"operator": "!=",
		"order": 2,
		"desc": "接口状态码不等于200"
	}]
}
```



# 3、生成规则

# 4、生成策略

# 5、附件

## 5.1、枚举字段兼容









